import { Component } from '@angular/core';
import { NgxXml2jsonService } from 'ngx-xml2json';
import { XmlDataService } from './Xml-Data.service'

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.css']
})
export class AppComponent {
  title = 'app';
  data:any;
  product_img;
  xml = `<note><to>User</to><from>Library</from><heading>Message</heading><body>Some XML to convert to JSON!</body></note>`;
  constructor(private ngxXml2jsonService: NgxXml2jsonService, private XmlData: XmlDataService ) { 

  }

  ImportRecords(){
    this.XmlData.getXML().subscribe(data => {
      this.data = data;    
     // console.log(data);
      const parser = new DOMParser();
      const xml = parser.parseFromString(this.data, 'text/xml');
      const obj = this.ngxXml2jsonService.xmlToJson(xml);
      this.product_img= obj['catalog']['product'];

      console.log(obj);
      // console.log(obj['catalog']['product'][0]);
      console.log(obj['catalog']['product'][0]);
    });
    
  }
  refreshImages(status){
    if (status == true){
      console.log( "Uploaded successfully!");
      this.ImportRecords();
    }
}



  
}
